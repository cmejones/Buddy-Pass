
<div class="card">

    <div class="header">

        <div class="photo">
            <img src="<%= user.photo%>" alt="profile-img" class="profile-photo">
        </div>

        <h4 class="card-title"><%= user.firstName %> <%= user.lastName %></h4>
        <hr>
        <p class="card-text text-left">Bio: <%= user.bio %></p>
        <hr>
        <p class="card-text text-left">Department: <%= user.department %></p>
        <p class="card-text text-left">Title: <%= user.title %></p>
        <p class="card-text text-left">Preferred Method of Communication: <%= user.communication %></p>
        
        <p class="card-text text-left">My Strengths:  
            <ul id="userSkills">

            </ul>  
        </p>
        <p class="card-text text-left">Areas for Improvement: 
            <ul id="userWeaknesses">

            </ul>  
        </p>
        <p class="card-text text-left">What I want to learn:
            <ul id="userGoals">

            </ul>  
        </p>
    </div>
    <div class="photo">

    </div>
    <hr>
    <div class="card-footer">
        <a href="mailto:<%= user.email %>"><i class="fas fa-envelope-open-text fa-2x"></i></a>
    </div>
    <div class="content">
        <a href="/profile/edit" class="btn btn-primary">update</a>
        <button class="btn btn-primary" onclick="profileDelete()">delete profile</button>
        <% if (user) { %>
            <button class="btn btn-primary" onclick="appLogout()">Logout</button>
        <% } %>

    </div>
</div>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript" src="/js/script.js"></script>

<script type="text/javascript">
    const userSkills = document.getElementById("userSkills"); 
    const requestOne = axios.get('/api/user-skills');
    const requestTwo = axios.get('/api/skills');
    axios.all([requestOne, requestTwo])
    .then(axios.spread((...responses) => {
    console.log(responses, 'responses');
    
        const responseOne = responses[0];
        const responseTwo = responses[1];
        console.log(responseOne, 'responseOne');
        console.log(responseTwo, 'responseTwo');
        responseOne.data.forEach(function (userSkill, user) {
            console.log(responseOne.data[1].skills_id, 'skills data', responseTwo.data[0].id);
          //  if (responseOne.data.skills_id == responseTwo.data.id) {

                let optionSkill = document.createElement('li');
                userSkills.append(optionSkill);
                //optionSkill.value = responseOne.userSkill['id'];
                optionSkill.value = userSkill['id'];
                //optionSkill.innerText = responseTwo.userSkill['skill'];
                optionSkill.innerText = userSkills['skill'];
                console.log('user', user);
           // }
        });
    }))
    .catch (errors => {

    })



    const userWeaknesses = document.getElementById("userWeaknesses"); 
    axios.get('/api/user-skills')
    axios.get('/api/skills')
    .then(function (response) {
        //console.log(response);
        response.data.forEach(function (userWeakness) {
            var optionWeakness = document.createElement('li');
            userWeaknesses.append(optionWeakness);
            optionWeakness.value = userWeakness['id'];
            optionWeakness.innerText = userWeakness['skill'];
        });
    });

    const userGoals = document.getElementById("userGoals"); 
    axios.get('/api/user-skills')
    axios.get('/api/skills')
    .then(function (response) {
       // console.log(response);
        response.data.forEach(function (userGoal) {
            var optionGoal = document.createElement('li');
            userGoals.append(optionGoal);
            optionGoal.value = userGoal['id'];
            optionGoal.innerText = userGoal['skill'];
        });
    });

    //     const skillsName = something;
    //     axios.get('/api/skills', where )

    //         db.users.update(
    //     { 
    //     department: req.body.department,
    //     title: req.body.title,
    //     bio: req.body.bio
    //     },
    //     { where: { id: req.body.user_id } }
    // )
    // })
    
</script>
